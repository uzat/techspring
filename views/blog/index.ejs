<!-- views/blog/index.ejs -->
<%- include('../partials/header') %>

<main class="main-content page-content">
    <div class="container">
        <section class="page-header">
            <h1>TechSpring Blog</h1>
            <p class="page-subtitle">Insights, updates, and innovations from the TechSpring team</p>
            <a href="/blog/new" class="btn btn-primary">Write New Post</a>
        </section>

        <section class="blog-list">
            <% if (posts && posts.length > 0) { %>
                <div class="posts-grid">
                    <% posts.forEach(function(post) { %>
                        <article class="post-card">
                            <div class="post-content">
                                <h2><a href="/blog/<%= post.id %>"><%= post.title %></a></h2>
                                <p class="post-excerpt">
                                    <% if (post.content.length > 200) { %>
                                        <%= post.content.substring(0, 200) %>...
                                    <% } else { %>
                                        <%= post.content %>
                                    <% } %>
                                </p>
                                <div class="post-meta">
                                    <span class="post-date">
                                        <% var postDate = new Date(post.created_at); %>
                                        <%= postDate.toLocaleDateString('en-AU', { 
                                            year: 'numeric', 
                                            month: 'long', 
                                            day: 'numeric' 
                                        }) %>
                                    </span>
                                    <div class="post-actions">
                                        <a href="/blog/<%= post.id %>" class="btn btn-sm">Read More</a>
                                        <a href="/blog/<%= post.id %>/edit" class="btn btn-sm btn-secondary">Edit</a>
                                    </div>
                                </div>
                            </div>
                        </article>
                    <% }); %>
                </div>
            <% } else { %>
                <div class="empty-state">
                    <div class="empty-content">
                        <h3>No posts yet</h3>
                        <p>Be the first to share insights and innovations!</p>
                        <a href="/blog/new" class="btn btn-primary">Create First Post</a>
                    </div>
                </div>
            <% } %>
        </section>
    </div>
</main>

<%- include('../partials/footer') %>